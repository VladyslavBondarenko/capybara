workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: 7d812fe2-8abd-47ca-9d27-3ed7e62d7b6d
        APP_STORE_CONNECT_KEY_IDENTIFIER: 4X5V82JUU5
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmc5WDZockU5eUFieFU2UTdYdGlULWg3U2o0M0JGZ1AxU1VtYVY1c1BlZVdiOTBPX2pfVktBUWN3X1p6Y2VBX3hEUGJqaENITzV3OE1TZGxhZGFZX2F6bmhGZVdUbm44ZnJxQjgxSVhiSzFnbFc5QkllRkV6bV9FZ1p2SndIV2hjZV9lWmxXOVd4Z3U1Tk40YS1oODRQQnJOYlZha2ljUlgza0FibnN6aFN1bERFdG41bGd6eWNlam9UM1RPVjR3R05JRzRlcHRpeWV4dkJfNGZKNUJZY1pFTzl0cE9ZYWdUbndfSFhWX2lRT1ZrZHVLWl9pTWpfQjJONWVja0V0SHAwRGtJMmJwSWUwVjh0T051UEJQRUxFUTg1YXdQcUtYUE9JbnhwRkRoaFdlNFlyR1lFNGE1VHR5akR5TFgzX2ZrU0VRTkpoaU1kWnM4QWNyVlIya2hYdTR4a3ludnpJOS1vMWVMUEdGWk5CQTV3QlRYU0JKQkx6N3VfZVpQekhwd1Q4LWNEQnJDbW9vQUhwa2hhS1pIYWRqajlQUnRXbW9zQ3FWZXh4QXYtWWltd3RTQT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmc5WDJMTG15NkdFUm1CTTNIc3BFbk1QdjdBdUladFZBZXgzU3Q4ZDFtRDMtaWVhak5zZTZ5bktTRVJJZjFwV2NENUNWM1NzYnBMMmozVlVQQ3MzVk41YU1PWDZoZFBTSEE4bzk3NFY2dTl3M2dXNnZpOXkxOEFnNXlrQkk2clhUbzBlWDktc0FVdlpCSlJxOFpLUGlKN25FT0FLdTloSTI3Q2tGWjJhX0NnQW40WWR3Y1F0MDN2TDFRLTg2QU9uaHZyY2pnYVA0UnZLaEotbUVyS1VhMU9FalRGTjlDTTNMNWowSms5cV9qWENzMG1MNHNvT2FEbVhoZk92Z0NVY0xQWTZCNzBBWEFxMW94TnJYZGVJWkZKRVoxMnBoSzJtU1o5WWZkNDA4dXNFTmxOeXpxSktacnJyUWYwVWw3bU9uWlczZnhLOVNaRU1QNVRDZ3lvNzF4VE9VRVY0LXdyTzYxbTRydjVhdURNQjRzSEh3WTVTUjFyYVNrTVBURE5TbzB1NlhUU0VrM0lqa0xtY0hVZFU5ZGVzWXNzcW9iRUUzUS05blBqa3RYT0lmQTluczFZSWhaSlJ1ejNHR2tOSGNCZ0hqazNqY2ZQcU1SS3VyYXVCWHZrMEs1UjdKX2VGTzZkZnUzNllmZk9pdzZxakx0VWRYXzdBQlllUXpPUkNXNGZoZ1U1a0RYd2RTM2IyUzRVcXZqOEt1UWl6aU9KaFZiY2RBWm4zaTVORFZ3TFdHMVZtM1F6c3hiM1JwZXotUDI0enBVbUM3V2tCQXV3b0JHM3FoZjJfV0FHZm9HdUE1c0RtQWp6Rjd3alVKcUZfZVpZanI3Mll5NEJvS2pRLVZOUm1Dem02bHpUYmdhOWZBQkdrcU5TMlduQmlHZ1NsTGhZMEZaSDBJR204bVVxV0t4N0tjaXZXRDVpWmxucHpNeC13UnJNVnI4NVpvQzB5cko0ZUIyWkdoUlAtQ2RZa0RZQWZmUVdEVHhQRkY1WUowU05vVlFnLVJfRmJ5R3EwRUNZTmFhSXQtdTRUSEFyTWh0bC00YUctVWdFZUFQQ3FqdzZGTVBQRS1ZSGU3Ym1NUDc2cTBkSzB5ejMwMlpxR0dIOFRibVNJWGd4WVlFTVRCTWlIWXRVUWxUYnZvMzl4YlNCVkRwNHpmUmRmZVlrdzdmLVZjckZzR3paMVlLNlpPc2c5U3VWUmpqSEFPcGF2UHJXeWdSSDJ4R3pzUzJERWM1ZXZkeGhtY0U3WGxjbEt6MGNTZDVxdXdBM3JHX3BJVG9SNk9kT0dWUXIyTXVLRm9RRzFwQVZfN2Yzc3kzR1Z4bGtIWEVIcGlGaXJjUi1sR2kxdGxKTnN6ZlhZNmtieG44M2ZRR2o0dmtzZGUxSm9Rb2dLYTFtcHIzOFR5SlY1OVhmU0VITFVJY25CdGlaa24zRFJUTndZc3djREJKVm9vcTJkaXZsUWZySXNvS19OSkRHbkFObVU3LUVhOHpfbGJYZm8teXE5TnNkQTJaQnQxbUcwWFJvMXpzRjQzVW54T25tdXNOazNfR3M2d0N6UWplVVVQNTdzWVVjdHBxVWhOYzJMQXQxcW5zRTlTMUxUSEYwOUdZbVR3MmlZX1ZDSE9ING1LOWw5OFY0Wm5KZ0pIS3hWVVpHQlVDa01ZUVlzbW5tNG9XMW5wUGJUSzhOY1I2RVljUTFMdHNRSFRGbzVXYV9EbE9xbk1QZkcxZTV5VmFZY3VZSk9ieW1EZEtvb1JId1c0NDFlb19NRTU4cl9vSDg4c0x0R2JLUmZJY1ZsaDBpb1Vjb0ktMW1zdmpjZ1NoWkpUTlY3TFkwUVJ5OXdacmpiTlVXU1ZKVFhfcE00YXg0bE50VVBxYklGOWZ3Yno3cWZhTkxYYTJiY1N2cXllc0E1SWlBTlhkcTJnTUNEdzZ1eEd5WmJpTUZmR0hnR0w3UGtMN2FISmlxREUta21iVGZoNWg4UnRtZHVYRmVhelRrYkM4YV9BSmhzT29YZVpxTW1TRFJRTFFKU1pFcWpjYmtra0lOaWxxSzhrLXJoeHNLbVVJbUM5Q25Cb3gxZ3ZSal9yeTJ2YUNqQUszY211N2xWY1BzSHFmcE9DbnhMMi05NVBoaGQxRUxYaTZ0TERFVWRBZFZFWXBKZFRObzMtZXNIQ0Z5eUlycS1jT1hyUk9kRjVtZS1SZmdfRUlnUjh2N3M4dHdlUFE4UXRlREJBRG5oWWtUaF9mcnpqOTkyS0M0YWxVUWxGS2V0VlhnMW9EVWk0OGt4OU1ETUVkanlDYVFyLVo3dTI3TUFKeFJYdEk0aV96dUVsYlVILTZQTmZjTF9pY3QwRmZqellTYnoyclRtMDFSV3lMamZxcWdkTkI5Q1hpRTl3bklxam81dWRIVVpoUncyUGRjcTdvMlc5cE9BS3pVdWlndzhSOFd6ZllrT0t5OTlMandKZnZ1M2VvWWpGZnd2Vy1ZVlVWTTBLZW1yM2RaTmF1ZUdYcjdMcDVycGE2XzJFSFEtVk1pTTFFUUFka0dtMXR5SjBIRWpJVzVjVUtESW1ONnp3eHZtVFR0Q1BmYzZ6UmI1aVlTWXF4V2cyaUV4MXJNUnRyZ0liSFJURVNnTllqM21MQVMyZ2cyVTZfWGZTZG8ya2Y3VThQWFh2NW0yeXZXN3F2VlBIdXdVU2lQbk5vblMzTVRRc1h5UmRib0ZUSElvb3JmMjgyOUwwMm9iSXhZbWtDOVV5dmtGb2Vzazh0ZV9KX2s0dDVubDlUcGdxNEJYN0JHVjBUVnJQRTk0dHFRVXFuNE85SnhHem5oSWRNRHFyYjE2d1FRNkthSDZPV01vT2NSdktNaThEZWhvT3c5aUhWa0RUZmZBR1BQM0VPRVJJTEdJM1d3ZFlXNmZFUmxicm1TbVZOQWFYZzlFSnJzbXdKdjB3SmstQUdKLW5WUzJpc0VDT1U4bk55c1Q0dXZZbGlWZEhxb3NqQm1tNjlJNU1FQmJjdmlNX1pkTUNPUW83MmpPbGVqNGsyYTJ6b3lIUU1xbHJfYU5CajRrV1FQUERQRzN4aVY0ZmY2dFpCSHQ4TXQtMWFSMmJY)
      flutter: stable
      xcode: 12.4
      cocoapods: default
    scripts:
      - flutter packages pub get
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "io.codemagic.capybara" --type IOS_APP_STORE --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --export-options-plist=/Users/builder/export_options.plist
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      app_store_connect:
        api_key: $APP_STORE_CONNECT_PRIVATE_KEY
        key_id: $APP_STORE_CONNECT_KEY_IDENTIFIER
        issuer_id: $APP_STORE_CONNECT_ISSUER_ID
        submit_to_testflight: true
